<div class="zona-zoom-container">
  <div class="zona-zoom-img-wrapper">
    <!--
      Para ajustar el zoom y la posición de la imagen animada:
      - Modifica los valores de object-position y transform: scale en la clase .zona3-img y .zona3-img.zoom-activo en zona3.component.scss
      - object-position: mueve la imagen (porcentaje horizontal vertical)
      - transform: scale(X): ajusta el nivel de zoom
      Ejemplo:
        .zona3-img { object-position: 60% 30%; transform: scale(1); }
        .zona3-img.zoom-activo { transform: scale(2.2); }
      Prueba diferentes valores hasta que la zona mostrada sea la correcta.
    -->
    <img src="assets/zona3zoom.jpg" alt="Zoom Zona 3" class="zona-zoom-img zona3-img" [class.zoom-activo]="zoomActivo" />
  </div>
  <h2>Zona 3 - Tópico (Ocupado / Disponible)</h2>
  <div class="lactario-estado-container">
    <button class="lactario-estado-card" [ngClass]="asientos[0].estado" (click)="seleccionarAsiento(asientos[0])" *ngIf="asientos.length">
      <span class="estado-texto">
        <ng-container *ngIf="asientos[0].estado === 'ocupado'"><b>Ocupado</b></ng-container>
        <ng-container *ngIf="asientos[0].estado === 'libre'">Disponible</ng-container>
        <ng-container *ngIf="asientos[0].estado === 'no disponible'">No disponible</ng-container>
      </span>
    </button>
  </div>

  <div class="modal-overlay" *ngIf="mostrarModal && asientoSeleccionado" (click)="cerrarModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <h3>Información del Lactario</h3>
      <p><b>Estado:</b> <span [ngClass]="asientoSeleccionado.estado">
        {{ asientoSeleccionado.estado === 'libre' ? 'Disponible' : (asientoSeleccionado.estado === 'no disponible' ? 'No disponible' : asientoSeleccionado.estado) }}
      </span></p>
      <div class="modal-btn-row">
        <button (click)="toggleEstado()"
          class="btn-modal"
          [ngClass]="esOcupado(asientoSeleccionado?.estado) ? 'btn-verde' : 'btn-rojo'"
          [disabled]="esNoDisponible(asientoSeleccionado?.estado)">
           {{ esOcupado(asientoSeleccionado?.estado) ? 'Disponible' : 'Ocupado' }}
        </button>
        <button (click)="toggleNoDisponible()" class="btn-modal btn-gris">
          {{ esNoDisponible(asientoSeleccionado?.estado) ? ' Disponible' : ' NO DISPONIBLE' }}
        </button>
      </div>
      <ng-container *ngIf="asientoSeleccionado.estado === 'no disponible'">
        <p style="color:#888; margin-top:1rem;">Este espacio está marcado como <b>NO DISPONIBLE</b> y no puede ser reservado.</p>
      </ng-container>
      <button (click)="cerrarModal()" class="btn-modal btn-rojo" style="margin-top:2rem;">Cerrar</button>
    </div>
  </div>

  <!-- No hay modal ni formulario de reserva en zona 3 -->

  <button routerLink="/mapa-zonas" style="margin: 2rem auto 0 auto; display: block; padding: 0.7rem 2rem; font-size: 1.1rem; border-radius: 8px; background: #1a237e; color: #fff; border: none; cursor: pointer;">Volver a la página principal</button>
</div>
